---
id: quickstart
title: Quickstart
sidebar_label: Quickstart
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

### 1. Install `Fluse`

<Tabs
  defaultValue="yarn"
  values={[
    { label: 'yarn', value: 'yarn', },
    { label: 'npm', value: 'npm', },
  ]
}>

<TabItem value="npm">

```bash
npm install fluse --save-dev
```

</TabItem>
<TabItem value="yarn">

```bash
yarn add -D fluse
```

</TabItem>

</Tabs>

### 2. Define your fixtures

```typescript
// src/fixtures/userFixture.ts
import { fixture } from "fluse";
import { User } from "./entities/User";

type UserFixtureArgs = {
  username: string;
};

export const userFixture = fixture({
  async create(ctx, args: UserFixtureArgs) {
    const user = new User({ username: args.username });
    return user;
  },
});
```

```typescript
// src/fixtures/postFixture.ts
import { fixture } from "fluse";
import { Post } from "./entities/Post";

type PostsFixtureArgs = {
  author: User;
};

export const postsFixture = fixture({
  async create(ctx, args: PostsFixtureArgs) {
    return Array(10).fill(0).map((_, index) => {
      const post = new Post({
        title: `post ${index}`,
        author: args.author,
      });
      return post;
    });
  },
});
```

### 3. Combine them together

```typescript
import { combine } from "fluse";
import { userFixture } from "./fixtures/userFixture";
import { postFixture } from "./fixtures/postFixture";

const userWithPostsFixture = combine()
  .and(userFixture("foo", { username: "foo" }))
  .and(({ foo }) => postFixture("fooPosts", { author: foo }))
  .toFixture();
```

### 4. Use your fixtures

```typescript
import { combine, execute } from "fluse";
import { userFixture } from "./fixtures/userFixture";
import { postFixture } from "./fixtures/postFixture";

const userWithPostsFixture = combine()
  .and(userFixture("foo", { username: "foo" }))
  .and(({ foo }) => postFixture("fooPosts", { author: foo }))
  .toFixture();

describe("bar", () => {
  it("should return the first post of a user.", async () => {
    const { foo, fooPosts } = await execute(userWithPostsFixture);

    const actual = bar(foo);
    expect(actual.title).toBe(fooPosts[0].title);
  });
});
```