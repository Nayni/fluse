---
id: quickstart
title: Quickstart
sidebar_label: Quickstart
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

### 1. Install `Fluse`

<Tabs
  defaultValue="yarn"
  values={[
    { label: 'yarn', value: 'yarn', },
    { label: 'npm', value: 'npm', },
  ]
}>


<TabItem value="npm">


```bash
npm install fluse --save-dev
```

</TabItem>
<TabItem value="yarn">


```bash
yarn add -D fluse
```

</TabItem>


</Tabs>


### 2. Initialize

```typescript
import { fluse } from "fluse";
import fakerPlugin from "fluse-plugin-faker";

export const { fixture, combine, execute } = fluse({
  plugins: {
    faker: fakerPlugin(),
  },
});
```

### 3. Define some data fixtures for your domain

```typescript
import { Comment } from "./model/Comment";
import { Post } from "./model/Post";
import { User } from "./model/User";

export const userFixture = fixture<User>({
  create({ faker }) {
    return new User({
      userName: faker.internet.userName(),
    });
  },
});

interface CommentArgs {
  author: User;
}

export const commentFixture = fixture<Comment, CommentArgs>({
  create({ faker }, args) {
    return new Comment({
      message: faker.lorem.slug(),
      author: args.author,
    });
  },
});

interface PostArgs {
  author: User;
  comments?: Comment[];
}

export const postFixture = fixture<Post, PostArgs>({
  create({ faker }, args) {
    return new Post({
      title: faker.lorem.slug(),
      body: faker.lorem.paragraphs(4),
      author: args.author,
      comments: args.comments,
    });
  },
});
```

### 3. Supercharge your tests!

```typescript
it("should create a single post", async () => {
  const { singlePost } = await execute(
    postFixture("singlePost", {
      args: {
        author: userFixture.asArg(),
      },
    })
  );

  expect(singlePost).toBeDefined();
});

it("should create many posts", async () => {
  const { manyPosts } = await execute(
    postFixture("manyPosts", {
      list: 3,
      args: {
        author: userFixture.asArg(),
        comments: commentFixture.asArg({
          list: 3,
          args: { author: userFixture.asArg() },
        }),
      },
    })
  );

  expect(manyPosts).toBeDefined();
});

it("should create a complex scenario", async () => {
  const postsFromBobAndAlice = combine()
    .and(userFixture("bob"))
    .and(userFixture("alice"))
    .and(({ bob }) =>
      postFixture("bobsPosts", {
        list: 5,
        args: {
          author: bob,
          comments: commentFixture.asArg({
            list: 3,
            args: {
              author: userFixture.asArg(),
            },
          }),
        },
      })
    )
    .and(({ alice }) =>
      postFixture("alicesPosts", {
        list: 5,
        args: {
          author: alice,
          comments: commentFixture.asArg({
            list: 3,
            args: {
              author: userFixture.asArg(),
            },
          }),
        },
      })
    )
    .toFixture();

  const { bob, bobsPosts, alice, alicesPosts } = await execute(
    postsFromBobAndAlice
  );

  expect(bob).toBeDefined();
  expect(alice).toBeDefined();
});
```
