---
id: quickstart
title: Quickstart
sidebar_label: Quickstart
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

### 1. Install `Fluse`

<Tabs
  defaultValue="yarn"
  values={[
    { label: 'yarn', value: 'yarn', },
    { label: 'npm', value: 'npm', },
  ]
}>


<TabItem value="npm">


```bash
npm install fluse --save-dev
```

</TabItem>
<TabItem value="yarn">


```bash
yarn add -D fluse
```

</TabItem>


</Tabs>


### 2. Define your fixtures

```typescript
// src/fixtures/userFixture.ts
import { fixture } from "fluse";
import { User } from "./entities/User";

type UserFixtureArgs = {
  username: string;
};

export const userFixture = fixture({
  create(ctx, args: UserFixtureArgs) {
    const user = new User({ username: args.username });
    return user;
  },
});
```

```typescript
// src/fixtures/postFixture.ts
import { fixture } from "fluse";
import { Post } from "./entities/Post";

type PostFixtureArgs = {
  author: User;
};

export const postFixture = fixture({
  create(ctx, args: PostFixtureArgs, { index }) {
    const post = new Post({
      title: `post ${index}`,
      author: args.author,
    });
    return post;
  },
});
```

### 3. Combine them together

```typescript
import { combine } from "fluse";
import { userFixture } from "./fixtures/userFixture";
import { postFixture } from "./fixtures/postFixture";

const userWithPostsFixture = combine()
  .and(userFixture("foo", { username: "foo" }))
  .and(({ foo }) =>
    postFixture({ name: "fooPosts", list: 10 }, { author: foo })
  )
  .toFixture();
```

### 4. Use your fixtures

```typescript
import { createExecutor, combine } from "fluse";
import { userFixture } from "./fixtures/userFixture";
import { postFixture } from "./fixtures/postFixture";

const execute = createExecutor();

const userWithPostsFixture = combine()
  .and(userFixture("foo", { username: "foo" }))
  .and(({ foo }) =>
    postFixture({ name: "fooPosts", list: 10 }, { author: foo })
  )
  .toFixture();

describe("bar", () => {
  it("should return the first post of a user.", async () => {
    const { foo, fooPosts } = await execute(userWithPostsFixture);

    const actual = bar(foo, fooPosts);
    expect(actual.title).toBe(fooPosts[0].title);
  });
});
```
